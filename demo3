pull request from mozilla for demo3
